# ═══════════════════════════════════════════════════════════════════════════════
# Specification: bridge
# ═══════════════════════════════════════════════════════════════════════════════
# Generated: 2026-01-01T16:07:59.783509
# Generator: brownfield-discovery
# ═══════════════════════════════════════════════════════════════════════════════

spec_id: bridge-v1
name: bridge
version: '1.0'
status: as-built
schema_version: '2.0'
generated_at: '2026-01-01T16:07:59.783509'
generated_by: brownfield-discovery
description: Specification for tools/bridge
components:
- name: domain
  component_id: tools-bridge-domain
  location: tools/bridge/domain.py
  test_location: tests/unit/tools/test_builtin_checks_architecture.py
  description: 'Bridge Domain Model

    ====================


    Pure domain objects for the Profile-to-Conformance Bridge.

    Transforms discovered patterns into enforceable contract checks.'
  entities:
  - name: ConfidenceTier
    type: enum
    line_number: 16
    description: Confidence tier for determining auto-enablement.
    methods:
    - from_score
    - auto_enable
    - should_generate
    - needs_review
    test_methods: []
  - name: ConflictType
    type: enum
    line_number: 51
    description: Types of conflicts between generated and existing contracts.
    methods: []
    test_methods: []
  - name: ResolutionStrategy
    type: enum
    line_number: 59
    description: Strategies for resolving conflicts.
    methods: []
    test_methods: []
  - name: CheckTemplate
    type: dataclass
    line_number: 69
    description: 'Template for generating a conformance check.


      Templates use placeholders like {zone} that are resolved

      during generation.'
    methods:
    - resolve_id
    test_methods: []
  - name: GeneratedCheck
    type: dataclass
    line_number: 93
    description: A fully resolved check ready to be written to a contract.
    methods:
    - to_dict
    test_methods: []
  - name: GenerationMetadata
    type: dataclass
    line_number: 140
    description: Provenance tracking for generated contracts.
    methods:
    - to_dict
    test_methods: []
  - name: GeneratedContract
    type: dataclass
    line_number: 167
    description: A complete generated contract for a zone.
    methods:
    - enabled_count
    - disabled_count
    - review_required_count
    - to_dict
    test_methods: []
  - name: Conflict
    type: dataclass
    line_number: 226
    description: A detected conflict between generated and existing contracts.
    methods:
    - to_dict
    test_methods:
    - test_create_conflict
  - name: ContractSummary
    type: dataclass
    line_number: 254
    description: Summary of a generated contract.
    methods:
    - to_dict
    test_methods: []
  - name: ReviewItem
    type: dataclass
    line_number: 279
    description: An item requiring human review.
    methods:
    - to_dict
    test_methods: []
  - name: GenerationReport
    type: dataclass
    line_number: 295
    description: Summary report of a bridge generation run.
    methods:
    - to_dict
    test_methods: []
  - name: MappingContext
    type: dataclass
    line_number: 359
    description: 'Context provided to pattern mappings during generation.


      Contains profile data and helper methods for accessing

      patterns, structure, and zone information.'
    methods:
    - is_pattern_detected
    - get_pattern_confidence
    - get_pattern_primary
    - get_pattern_metadata
    - get_layer_paths
    - has_layer
    - get_architecture_style
    - has_framework
    test_methods: []
- name: profile_loader
  component_id: tools-bridge-profile_loader
  location: tools/bridge/profile_loader.py
  test_location: tests/unit/tools/bridge/test_profile_loader.py
  description: 'Profile Loader

    ==============


    Loads and parses codebase profiles from discovery output.

    Extracts zones, patterns, and creates mapping contexts.'
  entities:
  - name: ProfileLoader
    type: class
    line_number: 21
    description: 'Loads codebase profiles and creates mapping contexts.


      Handles both single-zone and multi-zone profiles.'
    methods:
    - load
    - profile_path
    - profile_hash
    - profile_generated_at
    - is_multi_zone
    - get_zones
    - get_languages
    - get_primary_language
    - create_context
    - get_all_contexts
    test_methods: []
  - name: load_profile
    type: function
    line_number: 297
    description: "Convenience function to load a profile.\n\nArgs:\n    root_path:\
      \ Repository root path\n    profile_path: Optional custom profile path\n\nReturns:\n\
      \    Tuple of (ProfileLoader, profile dict)"
    methods: []
    test_methods:
    - test_load_profile
- name: contract_builder
  component_id: tools-bridge-contract_builder
  location: tools/bridge/contract_builder.py
  test_location: tests/unit/tools/bridge/test_contract_builder.py
  description: 'Contract Builder

    ================


    Builds and writes contract YAML files from generated checks.'
  entities:
  - name: ContractBuilder
    type: class
    line_number: 39
    description: 'Builds contract YAML files from generated checks.


      Creates contracts with:

      - Header comments with provenance

      - Proper schema version

      - Generation metadata

      - Grouped checks by source pattern'
    methods:
    - build_contract
    - write_contract
    - preview_contract
    - get_output_path
    - contract_exists
    test_methods: []
- name: orchestrator
  component_id: tools-bridge-orchestrator
  location: tools/bridge/orchestrator.py
  test_location: tests/unit/tools/tdflow/test_orchestrator.py
  description: 'Bridge Orchestrator

    ===================


    Main orchestrator for the Profile-to-Conformance Bridge.

    Coordinates profile loading, mapping, conflict resolution, and contract generation.'
  entities:
  - name: BridgeOrchestrator
    type: class
    line_number: 28
    description: "Orchestrates the Profile-to-Conformance Bridge process.\n\nWorkflow:\n\
      1. Load codebase profile\n2. Create mapping contexts for each zone\n3. Run pattern\
      \ mappings to generate checks\n4. Detect and resolve conflicts\n5. Build and\
      \ write contract files\n6. Generate report\n\nExample:\n    >>> orchestrator\
      \ = BridgeOrchestrator(Path(\".\"))\n    >>> contracts, report = orchestrator.generate()\n\
      \    >>> for contract in contracts:\n    ...     print(f\"{contract.name}: {len(contract.checks)}\
      \ checks\")"
    methods:
    - generate
    - preview
    - list_mappings
    - refresh
    - write_report
    test_methods: []
