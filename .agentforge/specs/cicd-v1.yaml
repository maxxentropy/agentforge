# ═══════════════════════════════════════════════════════════════════════════════
# Specification: cicd
# ═══════════════════════════════════════════════════════════════════════════════
# Generated: 2026-01-01T16:07:58.767676
# Generator: brownfield-discovery
# ═══════════════════════════════════════════════════════════════════════════════

spec_id: cicd-v1
name: cicd
version: '1.0'
status: as-built
schema_version: '2.0'
generated_at: '2026-01-01T16:07:58.767676'
generated_by: brownfield-discovery
description: Specification for tools/cicd
components:
- name: runner
  component_id: tools-cicd-runner
  location: tools/cicd/runner.py
  test_location: tests/test_python_checks.py
  description: 'CI Runner

    =========


    Main orchestrator for CI/CD conformance checking.

    Handles parallel execution, caching, and mode-specific logic.'
  entities:
  - name: CIRunner
    type: class
    line_number: 29
    description: 'Main CI/CD conformance check runner.


      Orchestrates:

      - Check execution in different modes (full, incremental, PR)

      - Parallel execution for performance

      - Caching to avoid redundant checks

      - Baseline comparison for PR mode'
    methods:
    - run
    test_methods: []
  - name: CheckCache
    type: class
    line_number: 428
    description: 'Simple file-based cache for check results.


      Caches check results by a key derived from check_id and file content hashes.

      Results are stored as JSON with a TTL for automatic expiration.'
    methods:
    - get
    - set
    - clear
    - prune_expired
    test_methods: []
- name: domain
  component_id: tools-cicd-domain
  location: tools/cicd/domain.py
  test_location: tests/unit/tools/test_builtin_checks_architecture.py
  description: 'CI/CD Domain Entities

    =====================


    Pure domain objects for CI/CD integration. No I/O operations.

    These entities represent the core business logic for baseline comparison,

    violation tracking, and CI result management.'
  entities:
  - name: CIMode
    type: enum
    line_number: 17
    description: CI execution modes.
    methods: []
    test_methods: []
  - name: ExitCode
    type: enum
    line_number: 24
    description: Structured exit codes for CI integration.
    methods:
    - description
    test_methods: []
  - name: CIViolation
    type: dataclass
    line_number: 46
    description: 'Individual violation record for CI/CD context.


      Extends the core Violation concept with CI-specific features

      like SARIF conversion and baseline hashing.'
    methods:
    - hash
    - to_sarif_result
    - to_junit_testcase
    test_methods: []
  - name: BaselineEntry
    type: dataclass
    line_number: 159
    description: 'Single entry in the violation baseline.


      Stores the hash and metadata needed to identify a violation

      across runs without storing the full violation details.'
    methods:
    - from_violation
    - to_dict
    - from_dict
    test_methods: []
  - name: Baseline
    type: dataclass
    line_number: 215
    description: 'Collection of known violations (baseline).


      The baseline represents the current state of violations on the main branch.

      PR checks compare against this to identify new vs existing violations.'
    methods:
    - contains
    - get_entry
    - add
    - remove
    - to_dict
    - from_dict
    - create_empty
    test_methods:
    - test_compare_no_baseline_raises
    - test_get_stats_no_baseline
    - test_load_corrupted_baseline
    - test_pr_mode_uses_baseline
    - test_error_result_on_baseline_not_found
  - name: BaselineComparison
    type: dataclass
    line_number: 292
    description: 'Result of comparing current violations against baseline.


      This is the core of PR checking - categorizing violations as:

      - new: Introduced in this PR (should block)

      - fixed: Resolved in this PR (celebrate!)

      - existing: Already in baseline (tech debt)'
    methods:
    - introduces_violations
    - net_change
    - has_improvements
    - new_errors
    - new_warnings
    - should_fail
    - compare
    test_methods: []
  - name: CIResult
    type: dataclass
    line_number: 389
    description: 'Complete result of a CI check run.


      Contains all information needed to generate output reports

      and determine the exit code.'
    methods:
    - total_violations
    - error_count
    - warning_count
    - info_count
    - is_success
    - get_violations_by_file
    - get_violations_by_check
    - to_summary_dict
    test_methods: []
  - name: CIConfig
    type: dataclass
    line_number: 486
    description: 'Configuration for CI check runs.


      Controls behavior like parallelism, failure conditions,

      and output formats.'
    methods:
    - to_dict
    - from_dict
    - for_github_actions
    - for_azure_devops
    test_methods: []
- name: baseline
  component_id: tools-cicd-baseline
  location: tools/cicd/baseline.py
  test_location: tests/unit/tools/cicd/test_baseline.py
  description: 'Baseline Management

    ===================


    Handles loading, saving, and comparing violation baselines.

    Baselines track known violations to distinguish new issues from tech debt.'
  entities:
  - name: BaselineManager
    type: class
    line_number: 23
    description: 'Manages violation baselines for CI/CD integration.


      The baseline file stores a snapshot of known violations on the main branch.

      PR checks compare against this to identify new violations (regressions)

      versus existing ones (tech debt).'
    methods:
    - load
    - save
    - create_from_violations
    - update
    - compare
    - exists
    - get_stats
    test_methods: []
  - name: GitHelper
    type: class
    line_number: 192
    description: 'Git operations for CI/CD integration.


      Provides methods to get changed files for incremental checking

      and commit information.'
    methods:
    - get_changed_files
    - get_merge_base
    - get_current_sha
    - get_current_branch
    - is_git_repo
    - get_repo_root
    - file_exists_at_ref
    test_methods: []
  - name: BaselineError
    type: class
    line_number: 316
    description: Error related to baseline operations.
    methods: []
    test_methods: []
  - name: GitError
    type: class
    line_number: 321
    description: Error related to git operations.
    methods: []
    test_methods: []
