# Generated by AgentForge
# Spec: human_escalation
# Phase: green
# Date: 2025-12-31

"""Domain entities for human escalation operations."""

from datetime import datetime
from enum import Enum
from typing import Optional
from dataclasses import dataclass


class EscalationPriority(Enum):
    """Urgency level for escalations."""
    LOW = 1
    MEDIUM = 2
    HIGH = 3
    CRITICAL = 4


class EscalationStatus(Enum):
    """Current status of an escalation."""
    PENDING = "pending"
    ACKNOWLEDGED = "acknowledged"
    IN_PROGRESS = "in_progress"
    RESOLVED = "resolved"
    EXPIRED = "expired"
    CANCELLED = "cancelled"


class EscalationChannel(Enum):
    """Channels for human notification."""
    CLI = "cli"
    FILE = "file"
    WEBHOOK = "webhook"
    EMAIL = "email"


class ResolutionType(Enum):
    """How an escalation was resolved."""
    APPROVED = "approved"
    REJECTED = "rejected"
    MODIFIED = "modified"
    DEFERRED = "deferred"
    TIMEOUT = "timeout"


@dataclass
class Escalation:
    """A request for human intervention."""
    id: str
    session_id: str
    created_at: datetime
    priority: EscalationPriority
    status: EscalationStatus
    reason: str
    context: dict
    recommended_actions: list[str]
    timeout_seconds: Optional[int] = None
    acknowledged_at: Optional[datetime] = None
    resolved_at: Optional[datetime] = None


@dataclass
class EscalationResolution:
    """Human's response to an escalation."""
    escalation_id: str
    resolution_type: ResolutionType
    decision: str
    resolved_at: datetime
    notes: Optional[str] = None
    resolved_by: Optional[str] = None


@dataclass
class EscalationRule:
    """Rules for when to trigger escalation."""
    name: str
    triggers: list[str]
    priority: EscalationPriority
    channels: list[EscalationChannel]
    timeout_seconds: int = 3600
    auto_resolve_action: Optional[str] = None
